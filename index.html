<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lahmacun SarayÄ± Kampanya</title>
<style>
body{margin:0;font-family:'Poppins',sans-serif;background:linear-gradient(135deg,#ff9a9e,#fad0c4);display:flex;justify-content:center;align-items:center;height:100vh;text-align:center;color:#222;}
.card{background:rgba(255,255,255,0.9);padding:30px;border-radius:20px;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,0.2);}
h1{font-size:2em;margin-bottom:10px;}
p{font-size:1.2em;margin:5px 0;}
.stok{font-size:2em;font-weight:bold;margin:15px 0;position:relative;}
.bar-container{width:100%;background:#ddd;border-radius:10px;height:25px;overflow:hidden;margin:10px 0;}
.bar{height:100%;width:0%;border-radius:10px;transition:0.5s;box-shadow:0 0 15px #ff6b6b;}
button{margin-top:15px;padding:10px 20px;background:#ff6b6b;color:white;border:none;border-radius:10px;font-size:1em;cursor:pointer;transition:.3s;}
button:hover{background:#ff4040;}
</style>
</head>
<body>
<div class="card">
<h1>ğŸ½ï¸ Akdeniz Ãœniversitesi Ã–ÄŸrencilerine Ã–zel Kampanya</h1>
<p id="mesaj">YÃ¼kleniyor...</p>
<p class="stok" id="stok">0</p>
<div class="bar-container"><div class="bar" id="stokBar"></div></div>
<button onclick="callNumber()">ğŸ“ Hemen Ara</button>
</div>

<script>
const API_URL="https://script.google.com/macros/s/AKfycbzxZ69X6cXfqHGt4qKY_lX9WA3okKifRQJ6RvZenGWPlLYSQnQTXLH-UPdwwJPSWTrLKw/exec"; // Apps Script URL

async function fetchData(){
  try{
    const res = await fetch(API_URL);
    const data = await res.json();
    document.getElementById('mesaj').textContent = data.mesaj || "BugÃ¼n kampanya var!";
    const stok = Number(data.stok ?? 0);
    document.getElementById('stok').textContent = stok;

    // Dinamik stok barÄ±
    const bar = document.getElementById("stokBar");
    const percent = Math.min(100, (stok/100)*100);
    bar.style.width = percent+"%";

    // Gradient renk: yeÅŸil -> kÄ±rmÄ±zÄ±
    const red = Math.min(255, 255 - Math.floor(percent*2.55));
    const green = Math.min(255, Math.floor(percent*2.55));
    bar.style.background = `rgb(${red},${green},0)`;
    bar.style.boxShadow = `0 0 20px rgb(${red},${green},0)`;
    
    // Pulse effect for FOMO
    if(stok <= 20) bar.classList.add("pulse");
    else bar.classList.remove("pulse");
    
  } catch(err){
    document.getElementById('mesaj').textContent="Veri yÃ¼klenemedi ğŸ˜¢";
    document.getElementById('stok').textContent="-";
    console.error(err);
  }
}

function callNumber(){ window.location.href="tel:05404630707"; }
fetchData();
setInterval(fetchData,30000);
</script>
</body>
</html>
